<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SolusiYa - Find Free Help Near You</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body { margin: 0; font-family: Arial, sans-serif; }
    header {
      background: #014a63;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    form {
      padding: 1rem;
      background: #f2f2f2;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    form select, form button {
      padding: 0.5rem;
      font-size: 1rem;
    }
    #map {
      height: 80vh;
    }
    @media (max-width: 600px) {
      form {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>SolusiYa</h1>
    <p>Find free food, shelter, or health support near you</p>
    <select id="lang-select">
      <option value="en">English</option>
      <option value="es">EspaÃ±ol</option>
      <option value="pt">PortuguÃªs</option>
    </select>
  </header>

  <form id="helpForm">
    <select id="country">
      <option value="all">ðŸŒŽ All Countries</option>
      <option value="usa">ðŸ‡ºðŸ‡¸ USA</option>
    </select>

    <select id="state" style="display:none;">
      <option value="all">All States</option>
      <option value="al">AL</option>
      <option value="ak">AK</option>
      <option value="az">AZ</option>
      <option value="ar">AR</option>
      <option value="ca">CA</option>
      <option value="co">CO</option>
      <option value="ct">CT</option>
      <option value="de">DE</option>
      <option value="fl">FL</option>
      <option value="ga">GA</option>
      <option value="hi">HI</option>
      <option value="id">ID</option>
      <option value="il">IL</option>
      <option value="in">IN</option>
      <option value="ia">IA</option>
      <option value="ks">KS</option>
      <option value="ky">KY</option>
      <option value="la">LA</option>
      <option value="me">ME</option>
      <option value="md">MD</option>
      <option value="ma">MA</option>
      <option value="mi">MI</option>
      <option value="mn">MN</option>
      <option value="ms">MS</option>
      <option value="mo">MO</option>
      <option value="mt">MT</option>
      <option value="ne">NE</option>
      <option value="nv">NV</option>
      <option value="nh">NH</option>
      <option value="nj">NJ</option>
      <option value="nm">NM</option>
      <option value="ny">NY</option>
      <option value="nc">NC</option>
      <option value="nd">ND</option>
      <option value="oh">OH</option>
      <option value="ok">OK</option>
      <option value="or">OR</option>
      <option value="pa">PA</option>
      <option value="ri">RI</option>
      <option value="sc">SC</option>
      <option value="sd">SD</option>
      <option value="tn">TN</option>
      <option value="tx">TX</option>
      <option value="ut">UT</option>
      <option value="vt">VT</option>
      <option value="va">VA</option>
      <option value="wa">WA</option>
      <option value="wv">WV</option>
      <option value="wi">WI</option>
      <option value="wy">WY</option>
    </select>

    <select id="type">
      <option value="all">All Help Types</option>
      <option value="shelter">Shelter</option>
      <option value="food">Food</option>
      <option value="medical">Medical</option>
    </select>

    <button type="submit">Find Help</button>
  </form>

  <div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  const map = L.map('map').setView([37.8, -96], 4);


L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: 'Â© OpenStreetMap contributors'
}).addTo(map);

const helpCenters = [
  { name: "Downtown Rescue Mission", address: "1400 Evangel Dr NW, Huntsville, AL", country: "usa", state: "al", lat: 34.7532, lng: -86.6031, services: ["shelter"] },
  { name: "Downtown Hope Center", address: "240 E 3rd Ave, Anchorage, AK", country: "usa", state: "ak", lat: 61.2181, lng: -149.8855, services: ["shelter"] },
  { name: "UMOM New Day Centers", address: "3333 E Van Buren St, Phoenix, AZ", country: "usa", state: "az", lat: 33.4511, lng: -112.0078, services: ["shelter"] },
  { name: "The Salvation Army", address: "1111 W Markham St, Little Rock, AR", country: "usa", state: "ar", lat: 34.7465, lng: -92.2896, services: ["shelter"] },
  { name: "Los Angeles Mission", address: "303 E 5th St, Los Angeles, CA", country: "usa", state: "ca", lat: 34.0446, lng: -118.2478, services: ["shelter"] },
  { name: "Denver Rescue Mission", address: "1130 Park Ave W, Denver, CO", country: "usa", state: "co", lat: 39.7537, lng: -104.979, services: ["shelter"] },
  { name: "Columbus House", address: "586 Ella T Grasso Blvd, New Haven, CT", country: "usa", state: "ct", lat: 41.3083, lng: -72.9279, services: ["shelter"] },
  { name: "Sunday Breakfast Mission", address: "110 N Poplar St, Wilmington, DE", country: "usa", state: "de", lat: 39.7391, lng: -75.5484, services: ["shelter"] },
  { name: "Camillus House", address: "1603 NW 7th Ave, Miami, FL", country: "usa", state: "fl", lat: 25.7893, lng: -80.2082, services: ["shelter"] },
  { name: "Atlanta Mission", address: "2353 Bolton Rd NW, Atlanta, GA", country: "usa", state: "ga", lat: 33.793, lng: -84.4716, services: ["shelter"] },
  { name: "Institute for Human Services", address: "546 Kaaahi St, Honolulu, HI", country: "usa", state: "hi", lat: 21.3187, lng: -157.8641, services: ["shelter"] },
  { name: "Boise Rescue Mission", address: "308 S 24th St, Boise, ID", country: "usa", state: "id", lat: 43.615, lng: -116.2386, services: ["shelter"] },
  { name: "Pacific Garden Mission", address: "1458 S Canal St, Chicago, IL", country: "usa", state: "il", lat: 41.8601, lng: -87.6395, services: ["shelter"] },
  { name: "Wheeler Mission", address: "245 N Delaware St, Indianapolis, IN", country: "usa", state: "in", lat: 39.7701, lng: -86.1555, services: ["shelter"] },
  { name: "Shelter House", address: "429 Southgate Ave, Iowa City, IA", country: "usa", state: "ia", lat: 41.65, lng: -91.5302, services: ["shelter"] },
  { name: "Topeka Rescue Mission", address: "600 N Kansas Ave, Topeka, KS", country: "usa", state: "ks", lat: 39.0598, lng: -95.674, services: ["shelter"] },
  { name: "Volunteers of America", address: "1321 S Preston St, Louisville, KY", country: "usa", state: "ky", lat: 38.228, lng: -85.7409, services: ["shelter"] },
  { name: "New Orleans Mission", address: "1130 Oretha Castle Haley Blvd, New Orleans, LA", country: "usa", state: "la", lat: 29.9435, lng: -90.0751, services: ["shelter"] },
  { name: "Preble Street", address: "5 Portland St, Portland, ME", country: "usa", state: "me", lat: 43.6591, lng: -70.2568, services: ["shelter"] },
  { name: "Helping Up Mission", address: "1029 E Baltimore St, Baltimore, MD", country: "usa", state: "md", lat: 39.2896, lng: -76.6019, services: ["shelter"] },
  { name: "Pine Street Inn", address: "444 Harrison Ave, Boston, MA", country: "usa", state: "ma", lat: 42.3431, lng: -71.065, services: ["shelter"] },
  { name: "Detroit Rescue Mission", address: "150 Stimson St, Detroit, MI", country: "usa", state: "mi", lat: 42.3382, lng: -83.0628, services: ["shelter"] },
  { name: "Sharing and Caring Hands", address: "525 N 7th St, Minneapolis, MN", country: "usa", state: "mn", lat: 44.9812, lng: -93.2785, services: ["shelter"] },
  { name: "Stewpot Community Services", address: "1100 W Capitol St, Jackson, MS", country: "usa", state: "ms", lat: 32.3018, lng: -90.1923, services: ["shelter"] },
  { name: "City Union Mission", address: "1100 E 11th St, Kansas City, MO", country: "usa", state: "mo", lat: 39.1001, lng: -94.5706, services: ["shelter"] },
  { name: "Montana Rescue Mission", address: "2822 Minnesota Ave, Billings, MT", country: "usa", state: "mt", lat: 45.7823, lng: -108.5254, services: ["shelter"] },
  { name: "Open Door Mission", address: "2828 N 23rd St E, Omaha, NE", country: "usa", state: "ne", lat: 41.2917, lng: -95.9245, services: ["shelter"] },
  { name: "Catholic Charities", address: "1501 Las Vegas Blvd N, Las Vegas, NV", country: "usa", state: "nv", lat: 36.1854, lng: -115.1352, services: ["shelter"] },
  { name: "New Horizons Shelter", address: "57 Hanover St, Manchester, NH", country: "usa", state: "nh", lat: 42.9956, lng: -71.4548, services: ["shelter"] },
  { name: "Evaâ€™s Village", address: "393 Main St, Paterson, NJ", country: "usa", state: "nj", lat: 40.918, lng: -74.1718, services: ["shelter"] },
  { name: "Joy Junction", address: "4500 2nd St SW, Albuquerque, NM", country: "usa", state: "nm", lat: 35.0304, lng: -106.6817, services: ["shelter"] },
  { name: "The Bowery Mission", address: "227 Bowery, New York, NY", country: "usa", state: "ny", lat: 40.7216, lng: -73.9934, services: ["shelter"] },
  { name: "Urban Ministry Center", address: "945 N College St, Charlotte, NC", country: "usa", state: "nc", lat: 35.234, lng: -80.8274, services: ["shelter"] },
  { name: "New Life Center", address: "1900 E Divide Ave, Bismarck, ND", country: "usa", state: "nd", lat: 46.8139, lng: -100.783, services: ["shelter"] },
  { name: "Lutheran Metropolitan Ministry", address: "2100 Lakeside Ave E, Cleveland, OH", country: "usa", state: "oh", lat: 41.5087, lng: -81.6783, services: ["shelter"] },
  { name: "City Rescue Mission", address: "800 W California Ave, Oklahoma City, OK", country: "usa", state: "ok", lat: 35.4676, lng: -97.5164, services: ["shelter"] },
  { name: "Portland Rescue Mission", address: "111 W Burnside St, Portland, OR", country: "usa", state: "or", lat: 45.5231, lng: -122.675, services: ["shelter"] },
  { name: "Sunday Breakfast Rescue Mission", address: "302 N 13th St, Philadelphia, PA", country: "usa", state: "pa", lat: 39.9566, lng: -75.1603, services: ["shelter"] },
  { name: "Crossroads Rhode Island", address: "160 Broad St, Providence, RI", country: "usa", state: "ri", lat: 41.8191, lng: -71.4147, services: ["shelter"] },
  { name: "Oliver Gospel Mission", address: "1100 Taylor St, Columbia, SC", country: "usa", state: "sc", lat: 34.0055, lng: -81.0325, services: ["shelter"] },
  { name: "Union Gospel Mission", address: "703 E 8th St, Sioux Falls, SD", country: "usa", state: "sd", lat: 43.55, lng: -96.7, services: ["shelter"] },
  { name: "Nashville Rescue Mission", address: "639 Lafayette St, Nashville, TN", country: "usa", state: "tn", lat: 36.1503, lng: -86.7786, services: ["shelter"] },
  { name: "Star of Hope Mission", address: "1811 Ruiz St, Houston, TX", country: "usa", state: "tx", lat: 29.7479, lng: -95.3563, services: ["shelter"] },
  { name: "The Road Home", address: "210 S Rio Grande St, Salt Lake City, UT", country: "usa", state: "ut", lat: 40.7662, lng: -111.9034, services: ["shelter"] },
  { name: "Good Samaritan Haven", address: "105 No Main St, Barre, VT", country: "usa", state: "vt", lat: 44.197, lng: -72.5023, services: ["shelter"] },
  { name: "Carpenter's Shelter", address: "930 N Henry St, Alexandria, VA", country: "usa", state: "va", lat: 38.8164, lng: -77.0502, services: ["shelter"] },
  { name: "Seattle's Union Gospel Mission", address: "318 2nd Ave Ext S, Seattle, WA", country: "usa", state: "wa", lat: 47.6026, lng: -122.3317, services: ["shelter"] },
  { name: "Union Mission", address: "107 Jefferson Ave, Huntington, WV", country: "usa", state: "wv", lat: 38.4193, lng: -82.4452, services: ["shelter"] },
  { name: "Milwaukee Rescue Mission", address: "830 N 19th St, Milwaukee, WI", country: "usa", state: "wi", lat: 43.0469, lng: -87.9397, services: ["shelter"] },
  { name: "Wyoming Rescue Mission", address: "230 N Park St, Casper, WY", country: "usa", state: "wy", lat: 42.8499, lng: -106.316, services: ["shelter"] }
];


  const markers = [];

  function renderMarkers(data) {
    markers.forEach(m => map.removeLayer(m));
    data.forEach(loc => {
      const m = L.marker([loc.lat, loc.lng])
        .addTo(map)
        .bindPopup(`<strong>${loc.name}</strong><br>${loc.address}<br><em>${loc.services.join(', ')}</em>`);
      markers.push(m);
    });
  }

  function filterLocations(country, state, type) {
    return helpCenters.filter(loc => {
      const countryMatch = country === "all" || loc.country === country;
      const stateMatch = country !== "usa" || state === "all" || loc.state === state;
      const typeMatch = type === "all" || loc.services.includes(type);
      return countryMatch && stateMatch && typeMatch;
    });
  }

  document.getElementById('country').addEventListener('change', function () {
    const stateSelect = document.getElementById('state');
    stateSelect.style.display = this.value === 'usa' ? 'inline-block' : 'none';
  });

  document.getElementById('helpForm').addEventListener('submit', e => {
    e.preventDefault();
    const country = document.getElementById('country').value;
    const state = document.getElementById('state').value;
    const type = document.getElementById('type').value;
    const filtered = filterLocations(country, state, type);
    renderMarkers(filtered);
    if (filtered.length) {
      map.setView([filtered[0].lat, filtered[0].lng], 6);
    }
  });

  renderMarkers(helpCenters);
</script>